<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Химическая кинетика</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: 0 auto; }
    h1, h2 { color: #0d3b66; margin: 20px 0 10px; }
    .input-group { margin: 12px 0; }
    label { display: inline-block; width: 250px; }
    button { padding: 10px 20px; background: #2a9d8f; color: white; border: none; cursor: pointer; margin-top: 10px; }
    canvas { margin-top: 20px; }
    a { color: #d32f2f; text-decoration: none; }
  </style>
</head>
<body>

<h1>Химическая кинетика: определение порядка реакции</h1>
<p>Реакция: A → продукты. Экспериментальные данные по концентрации [A] во времени.</p>

<div class="input-group">
  <label>Начальная концентрация [A]₀ (М):</label>
  <input type="number" id="c0" value="0.5" step="0.1" min="0.1">
</div>

<div class="input-group">
  <label>Константа скорости k:</label>
  <input type="number" id="k" value="0.02" step="0.01" min="0.001">
</div>

<div class="input-group">
  <label>Порядок реакции:</label>
  <select id="order">
    <option value="0">0</option>
    <option value="1" selected>1</option>
    <option value="2">2</option>
  </select>
</div>

<button onclick="plotKinetics()">Построить графики</button>
<p><a href="index.html">← Назад на главную</a></p>

<div id="charts">
  <h2>Зависимость [A] от времени</h2>
  <canvas id="chart1" height="300"></canvas>

  <h2>Линеаризация для определения порядка</h2>
  <p id="linear-desc">Для 1-го порядка: ln[A] = ln[A]₀ - kt</p>
  <canvas id="chart2" height="300"></canvas>
</div>

<script>
  let chart1 = null, chart2 = null;

  function plotKinetics() {
    const c0 = parseFloat(document.getElementById('c0').value);
    const k = parseFloat(document.getElementById('k').value);
    const order = parseInt(document.getElementById('order').value);

    const times = [], conc = [], linX = [], linY = [];
    const maxT = order === 0 ? c0/k + 10 : 200; // для 0-го порядка — до обнуления

    for (let t = 0; t <= maxT; t += 5) {
      let A;
      if (order === 0) {
        A = Math.max(0, c0 - k * t);
      } else if (order === 1) {
        A = c0 * Math.exp(-k * t);
      } else if (order === 2) {
        A = c1 / (1 + c0 * k * t);
      }
      times.push(t);
      conc.push(parseFloat(A.toFixed(4)));

      // Для линеаризации
      linX.push(t);
      if (order === 0) {
        linY.push(A);
        document.getElementById('linear-desc').textContent = 'Для 0-го порядка: [A] = [A]₀ - kt';
      } else if (order === 1) {
        linY.push(Math.log(A));
        document.getElementById('linear-desc').textContent = 'Для 1-го порядка: ln[A] = ln[A]₀ - kt';
      } else {
        linY.push(1 / A);
        document.getElementById('linear-desc').textContent = 'Для 2-го порядка: 1/[A] = 1/[A]₀ + kt';
      }
    }

    // Первый график: [A] = f(t)
    const ctx1 = document.getElementById('chart1').getContext('2d');
    if (chart1) chart1.destroy();
    chart1 = new Chart(ctx1, {
      type: 'line',
       {
        labels: times,
         conc,
        borderColor: '#e74c3c',
        tension: 0.3
      },
      options: {
        responsive: true,
        scales: {
          x: { title: { display: true, text: 'Время (с)' } },
          y: { title: { display: true, text: '[A], М' }, min: 0 }
        }
      }
    });

    // Второй график: линеаризация
    const ctx2 = document.getElementById('chart2').getContext('2d');
    if (chart2) chart2.destroy();
    chart2 = new Chart(ctx2, {
      type: 'line',
       {
        labels: linX,
         linY,
        borderColor: '#3498db',
        tension: 0.3
      },
      options: {
        responsive: true,
        scales: {
          x: { title: { display: true, text: 'Время (с)' } }
        }
      }
    });
  }

  window.onload = plotKinetics;
</script>

</body>
</html>